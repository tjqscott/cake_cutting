<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chart with Controls</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <style>


        .container {
            display: flex;
            width: 50vw;
            height: 50vh;
            position: absolute;
        }

        #chart_div {
            flex: 1;
            padding:10px;
            border-top-left-radius: 8px;
            border-bottom-left-radius: 8px;
            background-color: white;
        }

        .controls-container {
            height: 100%; /* Set the height of the parent container */
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* Distribute elements evenly with space between them */
        }

        .controls-container form {
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* Distribute form elements evenly */
            height: 100%; /* Ensure the form takes up the full height of the parent */
        }

        .controls-container button,
        .controls-container input {
            aspect-ratio: 1;
            width: 4rem;
            padding: 0;
            border: none;
            border-top-right-radius: 8px;
            border-bottom-right-radius: 8px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .controls-container input {
            border: 1px solid #ddd;
            text-align: center;
            outline: none; /* Remove the default focus outline */
        }

        .controls-container input:focus {
            border: 1px solid #ddd; /* Ensure the border remains the same when focused */
            box-shadow: none; /* Remove any box shadow on focus */
        }

        .controls-container input[type="number"] {
            -webkit-appearance: none; /* Remove default arrows in WebKit browsers (Chrome, Safari) */
            -moz-appearance: textfield; /* Remove default arrows in Firefox */
            appearance: none; /* Standard property to remove default arrows */
        }

        /* Hide spinners in WebKit browsers */
        .controls-container input[type="number"]::-webkit-inner-spin-button,
        .controls-container input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .controls-container button {
            background-color: #4285F4;
            color: white;
        }

        .controls-container button:hover {
            background-color: #357ABD;
        }

        button[style*="background-color: green"] {
            background-color: #34A853 !important;
        }

        button[style*="background-color: green"]:hover {
            background-color: #2E8B47 !important;
        }

        button[style*="background-color: red"],
        .clear-btn {
            background-color: #EA4335 !important;
        }

        button[style*="background-color: red"]:hover,
        .clear-btn:hover {
            background-color: #D03A2E !important;
        }

        button[style*="background-color: gray"] {
            background-color: #9AA0A6 !important;
        }

        button[style*="background-color: gray"]:hover {
            background-color: #80868B !important;
        }

        .custom-tooltip {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            padding: 0.5rem 0.75rem;
            font-size: 0.875rem;
            color: #333;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="chart_div"></div>
        <div class="controls-container">
            <form onsubmit="event.preventDefault(); addToList();">
                <button type="button" onclick="copyToClipboard(values[agent])">Copy</button>
                <button type="button" onclick="readFromClipboard()">Paste</button>
                <input type="number" id="numberInput" placeholder="value" required>
                <button style="background-color: green;" type="submit">Insert</button>
                <button style="background-color: red;" type="button" onclick="removeFromList()">Remove</button>
                <button style="background-color: gray;" class="clear-btn" type="button" onclick="clearChart()">Clear</button>
            </form>
        </div>
    </div>

    <script>
        google.charts.load('current', { packages: ['corechart'] });
        google.charts.setOnLoadCallback(drawChart);

        let values = [];
        let agent = 1;

        values.push([1, 1.1736, 1.3420, 1.5000, 1.6428, 1.7660, 1.8660, 1.9397, 1.9848, 2.0000,
            1.9848, 1.9397, 1.8660, 1.7660, 1.6428, 1.5000, 1.3420, 1.1736, 1, 0.8264,
            0.6580, 0.5000, 0.3572, 0.2340, 0.1340, 0.0603, 0.0152, 0, 0.0152, 0.0603,
            0.1340, 0.2340, 0.3572, 0.5000, 0.6580, 0.8264, 1]);

        values.push([2.0000, 1.9962, 1.9848, 1.9659, 1.9397, 1.9063, 1.8660, 1.8192, 1.7660, 1.7071,
            1.6428, 1.5736, 1.5000, 1.4226, 1.3420, 1.2588, 1.1736, 1.0872, 1.0000, 0.9128,
            0.8264, 0.7412, 0.6580, 0.5774, 0.5000, 0.4264, 0.3572, 0.2929, 0.2340, 0.1808,
            0.1340, 0.0937, 0.0603, 0.0341, 0.0152, 0.0038, 0.0000, 0.0038, 0.0152, 0.0341,
            0.0603, 0.0937, 0.1340, 0.1808, 0.2340, 0.2929, 0.3572, 0.4264, 0.5000, 0.5774,
            0.6580, 0.7412, 0.8264, 0.9128, 1.0000, 1.0872, 1.1736, 1.2588, 1.3420, 1.4226,
            1.5000, 1.5736, 1.6428, 1.7071, 1.7660, 1.8192, 1.8660, 1.9063, 1.9397, 1.9659,
            1.9848, 1.9962, 2.0000]);

        values.push([
            2.0000, 2.0875, 2.1763, 2.2679, 2.3640, 2.4663, 2.5774, 2.7002, 2.8391, 3.0000,
            3.1918, 3.4281, 3.7321, 4.1445, 4.7475, 5.7321, 7.6713, 13.4301, 27.6363, 92.2306
            , -88.2306, -23.6363, -9.4301, -3.6713, -1.7321, -0.7475, -0.1445, 0.2679, 0.5719,
            0.8082, 1.0000, 1.1609, 1.2998, 1.4226, 1.5337, 1.6360, 1.7321, 1.8237, 1.9125,
        ]);

        values.push([
            6.84, 6.25, 5.69, 5.16, 4.66, 4.19, 3.75, 3.34, 2.96, 2.61,
            2.29, 2.00, 1.74, 1.51, 1.31, 1.14, 1.00, 0.89, 0.81, 0.76,
            0.74, 0.76, 0.81, 0.89, 1.00, 1.14, 1.31, 1.51, 1.74, 2.00,
            2.29, 2.61]);

        function drawChart() {
            var data = new google.visualization.DataTable();
            data.addColumn('number', 'X');
            data.addColumn('number', 'Area');
            data.addColumn('number', 'Points');
            data.addColumn({ type: 'string', role: 'tooltip', p: { html: true } });

            const rows = values[agent].flatMap((x, index) => [
                [index, x, null, null],
                [index + 0.5, x, x, createTooltip(index, x)], // Use function to format tooltip
                [index + 1, x, null, null]
            ]);

            data.addRows(rows);

            var options = {
                tooltip: { isHtml: true }, // Enable HTML tooltips
                seriesType: 'area',
                series: {
                    0: { areaOpacity: 0.2, enableInteractivity: false, tooltip: { trigger: 'none' } },
                    1: { type: 'scatter', pointSize: 4, enableInteractivity: true }
                },
                hAxis: { textPosition: 'none', gridlines: { color: 'transparent' }, baselineColor: 'transparent' },
                vAxis: { textPosition: 'none', gridlines: { color: 'transparent' }, baselineColor: 'transparent' },
                legend: 'none',
                colors: ['#4285F4', '#4285F4'],
                chartArea: { left: 0, top: 0, width: '100%', height: '100%' }
            };

            var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));
            chart.draw(data, options);
        }

        // Function to create a styled tooltip
        function createTooltip(index, value) {
            return `<div class="custom-tooltip">
                        <strong>Index:</strong> ${index}<br>
                        <strong>Value:</strong> ${value}
                    </div>`;
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
            }).catch(err => {
                console.error("Failed to copy: ", err);
            });
        }

        async function readFromClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                // Split the text by commas, convert to numbers, and filter out NaN values
                values[agent] = text.split(',').map(Number).filter(value => !isNaN(value));
                drawChart();
            } catch (err) {
                console.error("Failed to read clipboard: ", err);
            }
        }

        function addToList() {
            const numInput = document.getElementById('numberInput');
            const num = +numInput.value;

            if (numInput.value === '' || isNaN(num)) {
                return;
            }

            values[agent].push(num);
            numInput.value = '';  // Clear the input field
            drawChart();
        }

        function removeFromList() {
            values[agent].pop();
            drawChart();
        }

        function clearChart() {
            values[agent] = [];
            drawChart();
        }

        function setAgent(n) {
            agent = n;
            drawChart();
        }
    </script>
</body>
</html>